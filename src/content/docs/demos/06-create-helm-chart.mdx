---
title: Create Helm Chart
description: Packaging OpenBB into a Helm Chart and deploying it.
---

import { Steps, Aside, Tabs, TabItem } from '@astrojs/starlight/components';

This guide demonstrates how to package the OpenBB API Server into a Helm chart and deploy it.

## Prerequisites

Ensure you have the following tools installed:

- **Helm**: [Installation Guide](https://helm.sh/docs/intro/install)
- **Docker**: For building the OpenBB image (if not already done)
- **Access to Registry**: To push your chart and image

## Build Custom Docker Image

Since the official image might be outdated, we recommend building your own Docker image from the latest source code.

<Steps>

1. Clone the OpenBB repository and checkout a version:

   ```bash
   git clone https://github.com/OpenBB-finance/OpenBB.git
   cd OpenBB
   
   # Switch to a specific version (e.g., v4.6.0)
   git checkout v4.6.0
   ```

2. Build and push the image using the existing Dockerfile:

   The OpenBB repository already includes a Dockerfile located at `build/docker/platform.dockerfile`. You can use this directly instead of creating a new one.

   ```bash
   # Build the image with the version tag
   docker build -f build/docker/platform.dockerfile -t <registry_url>/openbb:v4.6.0 .

   # Push the image to your registry
   docker push <registry_url>/openbb:v4.6.0
   ```

   *Replace `<registry_url>` with your actual registry address.*

</Steps>

## Create and Package Helm Chart

<Steps>

1. Create a new Helm chart:

   ```bash
   helm create openbb
   ```

   This creates a directory named `openbb` with the standard Helm chart structure.

2. Configure the Helm chart.

   **Update `Chart.yaml`**:
   
   Locate `openbb/Chart.yaml` and update the version to match your release. You can also add validation metadata like `icon`, `home`, and `maintainers`.

   ```yaml
   apiVersion: v2
   name: openbb
   description: A Helm chart for deploying the OpenBB Platform API
   type: application
   version: 0.1.0
   appVersion: "v4.6.0"
   icon: https://raw.githubusercontent.com/OpenBB-finance/OpenBBTerminal/main/images/openbb_logo.png
   home: https://openbb.co
   sources:
     - https://github.com/OpenBB-finance/OpenBB
   maintainers:
     - name: Your Name
       email: your.email@example.com
   ```

   **Update `values.yaml`**:

   Locate `openbb/values.yaml` and update the `image` settings to point to your new custom image. Also, update the health checks (`livenessProbe` and `readinessProbe`) to check `/docs`, as the root path `/` might return 404.

   ```yaml
   image:
     repository: <registry_url>/openbb
     pullPolicy: IfNotPresent
     tag: "v4.6.0"

   service:
     type: NodePort
     port: 8000
     targetPort: 8000
     nodePort: 30080  # Optional: Fixed NodePort for easier testing

   livenessProbe:
     httpGet:
       path: /docs
       port: http

   readinessProbe:
     httpGet:
       path: /docs
       port: http
   ```

   <Aside type="tip">
   Ensure `targetPort` matches the port your OpenBB application is listening on inside the container (8000 in the Dockerfile example above).
   </Aside>

3. Package the Helm chart:

   ```bash
   helm package openbb
   ```

   This will create a compressed archive: `openbb-0.1.0.tgz`.

4. Push the chart to your registry (Optional but recommended):

   ```bash
   helm push openbb-0.1.0.tgz oci://<registry_url>/charts --plain-http
   ```

   *Replace `<registry_url>` with your actual registry address.*

   After uploading, navigate to the [Applications Store](/service/applications/04-store/) to update the Helm chart configuration to use your custom image.

</Steps>

## Test with Python

Once your OpenBB API Server is deployed and running, you can interact with it using Python.

<Aside type="note">
**Prerequisite**: Install the `requests` library.
```bash
pip install requests
```
</Aside>

### API Interaction

Use the following script to fetch data from your OpenBB API.

<Tabs>
<TabItem label="Fetch Data">

```python
import requests

# Configuration
# Replace with your actual Node IP and the NodePort defined in values.yaml
BASE_URL = "http://<node_ip>:30080" 

def check_health():
    """Check if the API server is reachable."""
    try:
        # Check /docs as the root path might return 404
        response = requests.get(f"{BASE_URL}/docs") 
        if response.status_code == 200:
            print("✓ API is online!")
        else:
            print(f"✗ API returned status: {response.status_code}")
    except requests.exceptions.RequestException as e:
        print(f"✗ Failed to connect: {e}")

def get_market_data(ticker="AAPL", provider="yfinance"):
    """Example: Fetch market data for a ticker."""
    endpoint = f"{BASE_URL}/api/v1/equity/price/quote" # Example endpoint structure
    params = {"symbol": ticker, "provider": provider}
    
    try:
        print(f"Fetching data for {ticker} from {provider}...")
        response = requests.get(endpoint, params=params)
        
        if response.status_code == 200:
            data = response.json()
            print("✓ Data received:")
            print(data)
        else:
            print(f"✗ Error {response.status_code}: {response.text}")
            
    except Exception as e:
        print(f"✗ Error: {e}")

if __name__ == "__main__":
    check_health()
    # Uncomment below to test specific endpoints if your OpenBB instance supports them
    # get_market_data("MSFT")
```

</TabItem>
</Tabs>

<Aside type="tip">
The specific endpoints (like `/api/v1/equity/price/quote`) will depend on the version and configuration of your OpenBB Server. Consult the OpenBB API documentation for exact paths.
</Aside>